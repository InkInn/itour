{"version":3,"file":"megamenu.js","sourceRoot":"","sources":["megamenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,AfterViewInit,OnDestroy,Input,Output,Renderer,EventEmitter} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {DomHandler} from '../dom/domhandler';\nimport {MenuItem} from '../common/api';\nimport {Location} from '@angular/common';\nimport {Router} from '@angular/router';\n\n@Component({\n    selector: 'p-megaMenu',\n    template: `\n        <div [class]=\"styleClass\" [ngStyle]=\"style\"\n            [ngClass]=\"{'ui-menu ui-menubar ui-megamenu ui-widget ui-widget-content ui-corner-all ui-helper-clearfix':true,'ui-megamenu-vertical': orientation == 'vertical'}\">\n            <ul class=\"ui-menu-list ui-helper-reset ui-menubar-root-list\">\n                <template ngFor let-category [ngForOf]=\"model\">\n                    <li #item [ngClass]=\"{'ui-menuitem ui-widget ui-corner-all':true,'ui-menu-parent':category.items,'ui-menuitem-active':item==activeItem}\"\n                        (mouseenter)=\"onItemMouseEnter($event, item, category)\" (mouseleave)=\"onItemMouseLeave($event, item)\">\n                        <a class=\"ui-menuitem-link ui-corner-all ui-submenu-link\" [ngClass]=\"{'ui-state-disabled':category.disabled}\">\n                            <span class=\"ui-submenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-down':orientation=='horizontal','fa-caret-right':orientation=='vertical'}\"></span>\n                            <span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"category.icon\"></span>\n                            {{category.label}}\n                        </a>\n                        <div class=\"ui-megamenu-panel ui-widget-content ui-menu-list ui-corner-all ui-helper-clearfix ui-menu-child ui-shadow\">\n                            <div class=\"ui-g\">\n                                <template ngFor let-column [ngForOf]=\"category.items\">\n                                    <div [class]=\"getColumnClass(category)\">\n                                        <template ngFor let-submenu [ngForOf]=\"column\">\n                                            <ul class=\"ui-menu-list ui-helper-reset\">\n                                                <li class=\"ui-widget-header ui-corner-all\"><h3>{{submenu.label}}</h3></li>\n                                                <li *ngFor=\"let item of submenu.items\" class=\"ui-menuitem ui-widget ui-corner-all\">\n                                                    <a [href]=\"item.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" [attr.target]=\"item.target\"\n                                                        [ngClass]=\"{'ui-state-disabled':item.disabled}\" (click)=\"itemClick($event, item)\">\n                                                        <span class=\"ui-menuitem-icon fa fa-fw\" *ngIf=\"item.icon\" [ngClass]=\"item.icon\"></span>\n                                                        <span class=\"ui-menuitem-text\">{{item.label}}</span>\n                                                    </a>\n                                                </li>\n                                            </ul>\n                                        </template>\n                                    </div>\n                                </template>\n                            </div>\n                        </div>\n                    </li>\n                </template>\n            </ul>\n        </div>\n    `,\n    providers: [DomHandler]\n})\nexport class MegaMenu implements OnDestroy {\n\n    @Input() model: MenuItem[];\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n    \n    @Input() orientation: string = 'horizontal';\n    \n    activeItem: any;\n                \n    constructor(public el: ElementRef, public domHandler: DomHandler, public renderer: Renderer, public router: Router) {}\n    \n    onItemMouseEnter(event, item, menuitem: MenuItem) {\n        if(menuitem.disabled) {\n            return;\n        }\n        \n        this.activeItem = item;\n        let submenu =  item.children[0].nextElementSibling;\n        if(submenu) {\n            submenu.style.zIndex = ++DomHandler.zindex;\n\n            if(this.orientation === 'horizontal')  {\n                submenu.style.top = this.domHandler.getOuterHeight(item.children[0]) + 'px';\n                submenu.style.left = '0px';\n            }\n            else if(this.orientation === 'vertical')  {\n                submenu.style.top = '0px';\n                submenu.style.left = this.domHandler.getOuterWidth(item.children[0]) + 'px';\n            }\n        }\n    }\n    \n    onItemMouseLeave(event, link) {\n        this.activeItem = null;\n    }\n    \n    itemClick(event, item: MenuItem)Â {\n        if(item.disabled) {\n            event.preventDefault();\n            return;\n        }\n        \n        if(!item.url||item.routerLink) {\n            event.preventDefault();\n        }\n        \n        if(item.command) {\n            if(!item.eventEmitter) {\n                item.eventEmitter = new EventEmitter();\n                item.eventEmitter.subscribe(item.command);\n            }\n            \n            item.eventEmitter.emit({\n                originalEvent: event,\n                item: item\n            });\n        }\n                \n        if(item.routerLink) {\n            this.router.navigate(item.routerLink);\n        }\n        \n        this.activeItem = null;\n    }\n    \n    unsubscribe(item: any) {\n        if(item.eventEmitter) {\n            item.eventEmitter.unsubscribe();\n        }\n        \n        if(item.items) {\n            for(let childItem of item.items) {\n                this.unsubscribe(childItem);\n            }\n        }\n    }\n    \n    ngOnDestroy() {        \n        if(this.model) {\n            for(let item of this.model) {\n                this.unsubscribe(item);\n            }\n        }\n    }\n    \n    getColumnClass(menuitem: MenuItem) {\n        let length = menuitem.items ? menuitem.items.length: 0;\n        let columnClass;\n        switch(length) {\n            case 2:\n                columnClass= 'ui-g-6';\n            break;\n            \n            case 3:\n                columnClass= 'ui-g-4';\n            break;\n            \n            case 4:\n                columnClass= 'ui-g-3';\n            break;\n            \n            case 6:\n                columnClass= 'ui-g-2';\n            break;\n                        \n            default:\n                columnClass= 'ui-g-12';\n            break;\n        }\n        \n        return columnClass;\n    }\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [MegaMenu],\n    declarations: [MegaMenu]\n})\nexport class MegaMenuModule { }"]}