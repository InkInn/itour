{"version":3,"file":"panelmenu.js","sourceRoot":"","sources":["panelmenu.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule,Component,ElementRef,OnDestroy,Input,EventEmitter,trigger,state,transition,style,animate} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {MenuItem} from '../common/api';\nimport {Location} from '@angular/common';\nimport {Router} from '@angular/router';\n\nexport class BasePanelMenuItem {\n    \n    constructor(public router: Router) {}\n    \n    handleClick(event, item) {\n        if(item.disabled) {\n            event.preventDefault();\n            return;\n        }\n        \n        item.expanded = !item.expanded;\n        \n        if(!item.url||item.routerLink) {\n            event.preventDefault();\n        }\n                   \n        if(item.command) {\n            if(!item.eventEmitter) {\n                item.eventEmitter = new EventEmitter();\n                item.eventEmitter.subscribe(item.command);\n            }\n            \n            item.eventEmitter.emit({\n                originalEvent: event,\n                item: item\n            });\n        }\n        \n        if(item.routerLink) {\n            this.router.navigate(item.routerLink);\n        }\n    }\n}\n\n@Component({\n    selector: 'p-panelMenuSub',\n    template: `\n        <ul class=\"ui-menu-list ui-helper-reset\" [style.display]=\"expanded ? 'block' : 'none'\">\n            <li *ngFor=\"let child of item.items\" class=\"ui-menuitem ui-corner-all\" [ngClass]=\"{'ui-menu-parent':child.items}\">\n                <a [href]=\"child.url||'#'\" class=\"ui-menuitem-link ui-corner-all\" \n                    [ngClass]=\"{'ui-menuitem-link-hasicon':child.icon&&child.items,'ui-state-disabled':child.disabled}\" \n                    (click)=\"handleClick($event,child)\" [attr.target]=\"child.target\">\n                    <span class=\"ui-panelmenu-icon fa fa-fw\" [ngClass]=\"{'fa-caret-right':!child.expanded,'fa-caret-down':child.expanded}\" *ngIf=\"child.items\"></span\n                    ><span class=\"ui-menuitem-icon fa fa-fw\" [ngClass]=\"child.icon\" *ngIf=\"child.icon\"></span\n                    ><span class=\"ui-menuitem-text\">{{child.label}}</span>\n                </a>\n                <p-panelMenuSub [item]=\"child\" [expanded]=\"child.expanded\" *ngIf=\"child.items\"></p-panelMenuSub>\n            </li>\n        </ul>\n    `\n})\nexport class PanelMenuSub extends BasePanelMenuItem {\n    \n    @Input() item: MenuItem;\n    \n    @Input() expanded: boolean;\n    \n    constructor(router: Router) {\n        super(router);\n    }\n}\n\n@Component({\n    selector: 'p-panelMenu',\n    template: `\n        <div [class]=\"styleClass\" [ngStyle]=\"style\" [ngClass]=\"'ui-panelmenu ui-widget'\">\n            <div *ngFor=\"let item of model;let f=first;let l=last;\" class=\"ui-panelmenu-panel\">\n                <div tabindex=\"0\" [ngClass]=\"{'ui-widget ui-panelmenu-header ui-state-default':true,'ui-corner-top':f,'ui-corner-bottom':l&&!item.expanded,\n                    'ui-state-active':item.expanded,'ui-state-disabled':item.disabled}\">\n                    <a [href]=\"item.url||'#'\" [ngClass]=\"{'ui-panelmenu-headerlink-hasicon':item.icon}\" (click)=\"handleClick($event,item)\"\n                        [attr.target]=\"item.target\">\n                        <span *ngIf=\"item.items\" class=\"ui-panelmenu-icon fa\" [ngClass]=\"{'fa-caret-right':!item.expanded,'fa-caret-down':item.expanded}\"></span\n                        ><span class=\"ui-menuitem-icon fa\" [ngClass]=\"item.icon\" *ngIf=\"item.icon\"></span\n                        ><span class=\"ui-menuitem-text\">{{item.label}}</span>\n                    </a>\n                </div>\n                <div *ngIf=\"item.items\" class=\"ui-panelmenu-content-wrapper\" [@rootItem]=\"item.expanded ? 'visible' : 'hidden'\" \n                    [ngClass]=\"{'ui-panelmenu-content-wrapper-overflown': !item.expanded||animating}\">\n                    <div class=\"ui-panelmenu-content ui-widget-content\">\n                        <p-panelMenuSub [item]=\"item\" [expanded]=\"true\"></p-panelMenuSub>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `,\n    animations: [\n        trigger('rootItem', [\n            state('hidden', style({\n                height: '0px'\n            })),\n            state('visible', style({\n                height: '*'\n            })),\n            transition('visible => hidden', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)')),\n            transition('hidden => visible', animate('400ms cubic-bezier(0.86, 0, 0.07, 1)'))\n        ])\n    ]\n})\nexport class PanelMenu extends BasePanelMenuItem {\n    \n    @Input() model: MenuItem[];\n\n    @Input() style: any;\n\n    @Input() styleClass: string;\n    \n    public animating: boolean;\n    \n    constructor(router: Router) {\n        super(router);\n    }\n            \n    unsubscribe(item: any) {\n        if(item.eventEmitter) {\n            item.eventEmitter.unsubscribe();\n        }\n        \n        if(item.items) {\n            for(let childItem of item.items) {\n                this.unsubscribe(childItem);\n            }\n        }\n    }\n            \n    ngOnDestroy() {        \n        if(this.model) {\n            for(let item of this.model) {\n                this.unsubscribe(item);\n            }\n        }\n    }\n    \n    handleClick(event, item) {\n        this.animating = true;\n        super.handleClick(event, item);\n        //TODO: Use onDone of animate callback instead with RC6\n        setTimeout(() => {\n            this.animating = false;\n        }, 400);\n    }\n\n}\n\n@NgModule({\n    imports: [CommonModule],\n    exports: [PanelMenu],\n    declarations: [PanelMenu,PanelMenuSub]\n})\nexport class PanelMenuModule { }\n"]}